# Proyecto MVC en PHP ‚Äì Base Modular para Aplicaciones Web

Este repositorio contiene una aplicaci√≥n web estructurada bajo el patr√≥n **Modelo-Vista-Controlador** (MVC), dise√±ada para facilitar el desarrollo escalable, seguro y mantenible de interfaces din√°micas en PHP. A continuaci√≥n se detallan las secciones clave del sistema y las instrucciones para su instalaci√≥n, uso y extensi√≥n.

## √çndice de navegaci√≥n

| N¬∫ | Secci√≥n                                     | Enlace interno                          |
|----|---------------------------------------------|-----------------------------------------|
| 1  | Prop√≥sito y descripci√≥n funcional           | [Ir a secci√≥n](#1-prop√≥sito-y-descripci√≥n-funcional) |
| 2  | P√∫blico objetivo y tecnolog√≠as utilizadas   | [Ir a secci√≥n](#2-p√∫blico-objetivo-y-tecnolog√≠as-utilizadas) |
| 3  | Instalaci√≥n y configuraci√≥n                 | [Ir a secci√≥n](#3-instalaci√≥n-y-configuraci√≥n) |
| 4  | Estructura del proyecto                     | [Ir a secci√≥n](#4-estructura-del-proyecto) |
| 5  | Flujo de ejecuci√≥n                          | [Ir a secci√≥n](#5-flujo-de-ejecuci√≥n) |
| 6  | Convenciones de desarrollo                  | [Ir a secci√≥n](#6-convenciones-de-desarrollo) |
| 7  | Frontend                                    | [Ir a secci√≥n](#7-frontend) |
| 8  | Backend                                     | [Ir a secci√≥n](#8-backend) |
| 9  | Reutilizaci√≥n y helpers                     | [Ir a secci√≥n](#9-reutilizaci√≥n-y-helpers) |
| 10 | Testing y depuraci√≥n                        | [Ir a secci√≥n](#10-testing-y-depuraci√≥n) |
| 11 | Seguridad y buenas pr√°cticas                | [Ir a secci√≥n](#11-seguridad-y-buenas-pr√°cticas) |
| 12 | Colaboraci√≥n y control de versiones         | [Ir a secci√≥n](#12-colaboraci√≥n-y-control-de-versiones) |
| 13 | Documentaci√≥n adicional                     | [Ir a secci√≥n](#13-documentaci√≥n-adicional) |
| 14 | Extensi√≥n y mantenimiento                   | [Ir a secci√≥n](#14-extensi√≥n-y-mantenimiento) |
| 15 | Conclusi√≥n                                  | [Ir a secci√≥n](#15-conclusi√≥n) |

## 1. Prop√≥sito y descripci√≥n funcional

Este proyecto sirve como _plantilla base_ para construir aplicaciones web en PHP con una arquitectura modular. Su objetivo principal es:

- **Separar claramente** la l√≥gica de negocio, la presentaci√≥n y el control de flujo.

- **Permitir la carga din√°mica de vistas** mediante URLs amigables, gestionadas por `.htaccess`.

- **Facilitar la reutilizaci√≥n** de componentes HTML, scripts y estilos para mantener una interfaz coherente y eficiente.

- **Centralizar la configuraci√≥n y seguridad** mediante constantes globales definidas en los m√≥dulos `APP` y `SERVER`.

> `üí° Este enfoque modular permite escalar el sistema sin romper la base, facilitando el trabajo colaborativo y la extensi√≥n progresiva del proyecto.`

## 2. P√∫blico objetivo y tecnolog√≠as utilizadas

Dirigido a: Desarrolladores web en entornos PHP que necesiten una base estructurada para sistemas administrativos, sitios informativos o prototipos funcionales.

#### Tecnolog√≠as principales

- **PHP 8+** ‚Äî Programaci√≥n orientada a objetos para mayor claridad y reutilizaci√≥n.
- **Apache + .htaccess** ‚Äî Reescritura de URLs y control de acceso desde el servidor.
- **Composer** ‚Äî Gesti√≥n de dependencias y autoloading eficiente.
- **Bootstrap 5** ‚Äî Frontend responsivo con componentes reutilizables.
- **JavaScript** ‚Äî Interactividad y manipulaci√≥n din√°mica del DOM.
- **PDO** ‚Äî Acceso seguro a bases de datos mediante prepared statements.
- **AJAX** ‚Äî Peticiones as√≠ncronas sin recargar la p√°gina.
- **OpenSSL** ‚Äî Encriptaci√≥n de datos sensibles para mayor seguridad.

> `üí° Este stack est√° dise√±ado para acelerar el desarrollo seguro y modular de aplicaciones web.`

## 3. Instalaci√≥n y configuraci√≥n

#### Requisitos:

- **PHP 8.0** o superior
- **Apache** (_incluido en XAMPP_)
- **Composer**

> `üí° Aseg√∫rate de tener estos componentes activos antes de iniciar la instalaci√≥n.`

#### Pasos:

1. Clonar el repositorio en la carpeta `htdocs`:

   ```bash
   git clone https://github.com/usuario/proyecto.git
   cd proyecto
   composer install
   ```

2. Acceder a `"https://localhost/proyecto/".`

#### Configuraci√≥n inicial:

   - **config/SERVER:** contiene credenciales, claves de encriptaci√≥n y par√°metros de seguridad.

   - **config/APP:** contiene constantes generales como nombre del sistema y rutas base.

> `üí° Revisa estos archivos antes de desplegar en producci√≥n. Puedes parametrizar seg√∫n entorno (dev, staging, prod).`

## 4. Estructura del proyecto

El sistema est√° organizado en **m√≥dulos funcionales**, siguiendo una arquitectura basada en el patr√≥n MVC (Modelo-Vista-Controlador). Esta estructura permite mantener una separaci√≥n clara entre la l√≥gica de negocio, la presentaci√≥n y el control de flujo, facilitando la escalabilidad y el mantenimiento del c√≥digo.

Las siguientes carpetas est√°n pensadas para extensi√≥n y personalizaci√≥n:

- `view/html`  
  Contiene las vistas del sistema. Cada archivo representa una interfaz espec√≠fica y debe seguir la convenci√≥n `nombre-view.php`. Las vistas nuevas deben registrarse en `vista_model.php` para que el sistema las reconozca.

- `assets/components`  
  Almacena fragmentos HTML reutilizables como botones, formularios, tarjetas, etc. Estos componentes pueden ser incluidos en m√∫ltiples vistas para mantener consistencia visual y evitar duplicaci√≥n de c√≥digo.

- `helpers/js` y `helpers/php`  
  Contienen funciones auxiliares que pueden ser utilizadas en todo el sistema. En `helpers/js` se ubican scripts reutilizables para interactividad, mientras que en `helpers/php` se definen funciones para validaci√≥n, formateo, tokens, entre otros.

- `docs`  
  Carpeta destinada a la documentaci√≥n t√©cnica del proyecto. Aqu√≠ se incluyen archivos como `manual_desarrollador.txt`, `estructura_proyecto.txt` y `cosas_pendientes.txt`, √∫tiles para onboarding, revisi√≥n t√©cnica y seguimiento de tareas.

> ‚ÄØ`üí°Algunos archivos no deben modificarse directamente: .htaccess, composer.lock, index.php, vendor/, config/SERVER/. Alterarlos puede comprometer la estabilidad, seguridad o compatibilidad del sistema.`

## 5. Flujo de ejecuci√≥n

El sistema utiliza un flujo de carga din√°mico para renderizar vistas en funci√≥n de la URL solicitada. Este mecanismo permite mantener una arquitectura desacoplada y facilita la extensi√≥n del sistema sin alterar su n√∫cleo.

**La ruta de ejecuci√≥n sigue esta secuencia:**

    index.php ‚Üí vista_controller.php ‚Üí vista_model.php ‚Üí plantilla.php ‚Üí layouts + vista

**Explicaci√≥n del flujo:**

- `.htaccess`  
  Reescribe las URLs amigables del sistema, transformando rutas como `/inicio` en llamadas internas del tipo `index.php?page=inicio`.

- `vista_controller.php`  
  Interpreta el par√°metro `page` recibido por GET y determina qu√© vista debe cargarse. Tambi√©n puede incluir l√≥gica adicional si se requiere procesamiento previo.

- `vista_model.php`  
  Valida que la vista solicitada exista en el arreglo `paginas_existentes`. Si no est√° registrada, se redirige a una vista de error o a la p√°gina principal.

- `plantilla.php`  
  Integra los layouts comunes (`header.php`, `footer.php`, `links.php`, `scripts.php`) y carga la vista solicitada dentro de la estructura general del sistema.

> ‚ÄØ`üí°Este flujo modular permite agregar nuevas vistas sin modificar el n√∫cleo del sistema, manteniendo la escalabilidad y la claridad del c√≥digo.`

## 6. Convenciones de desarrollo

Para mantener la coherencia, legibilidad y escalabilidad del sistema, se siguen las siguientes convenciones de desarrollo en toda la estructura del proyecto:

- **Archivos en min√∫sculas con guiones bajos**  
  Todos los archivos deben nombrarse en min√∫sculas y utilizar guiones bajos para separar palabras. Ejemplo: `vista_controller.php`. Esto facilita la lectura y evita conflictos en sistemas sensibles a may√∫sculas.

- **Funciones en camelCase**  
  Las funciones deben definirse utilizando la convenci√≥n *camelCase*, comenzando con min√∫scula y sin guiones ni espacios. Ejemplos: `cargarVista`, `encriptarDato`. Esta convenci√≥n mejora la consistencia en el c√≥digo PHP y JavaScript.

- **Vistas nombradas como `nombre-view.php`**  
  Cada vista debe seguir el formato `nombre-view.php`, donde `nombre` representa el identificador funcional de la vista. Esto permite que el sistema las reconozca y las cargue din√°micamente.

- **Registro obligatorio de vistas en `vista_model.php`**  
  Toda vista nueva debe ser registrada en el arreglo `paginas_existentes` dentro de `vista_model.php`. Si no se registra, el sistema no podr√° cargarla correctamente y redirigir√° a una vista de error.

> ‚ÄØ`üí°Seguir estas convenciones garantiza que el sistema se mantenga ordenado, reproducible y f√°cilmente escalable por cualquier miembro del equipo.`


## 7. Frontend

El sistema est√° dise√±ado para facilitar la construcci√≥n de interfaces limpias, reutilizables y responsivas. La integraci√≥n de estilos, scripts y componentes se realiza de forma modular, manteniendo la separaci√≥n entre estructura, presentaci√≥n y l√≥gica.

**Framework principal:**

- **Bootstrap 5**  
  Puede utilizarse de forma local (copiado desde `vendor/`) o mediante CDN. Esto permite flexibilidad seg√∫n el entorno de despliegue y facilita el dise√±o responsivo sin necesidad de escribir estilos desde cero.

**Layouts integrados autom√°ticamente:**

- `header.php`, `footer.php`, `links.php`, `scripts.php`  
  Estos archivos conforman la estructura base de cada vista. Se cargan autom√°ticamente desde `plantilla.php`, permitiendo mantener consistencia visual y funcional en todo el sistema.

**Componentes reutilizables:**

- `assets/components`  
  Carpeta destinada a fragmentos HTML reutilizables como botones, formularios, tarjetas, etc. Estos componentes pueden incluirse en m√∫ltiples vistas para evitar duplicaci√≥n de c√≥digo.

**Scripts y estilos espec√≠ficos por vista:**

- `view/js` y `view/css`  
  Aqu√≠ se ubican los archivos JavaScript y CSS que aplican √∫nicamente a vistas particulares. Esto permite mantener el c√≥digo organizado y evitar conflictos entre m√≥dulos.

> `üí°Separar los estilos y scripts por vista mejora la mantenibilidad del sistema y permite escalar sin afectar otras secciones.`

## 8. Backend

El sistema backend est√° dise√±ado para centralizar la l√≥gica de negocio, la validaci√≥n de datos y el acceso seguro a la base de datos. Se basa en una estructura orientada a objetos que permite extender funcionalidades sin duplicar c√≥digo.

**Modelo base:**

- `mainModel`  
  Contiene los m√©todos comunes utilizados por todos los modelos del sistema. Entre ellos se incluyen:
  - Conexi√≥n a la base de datos mediante PDO
  - Encriptaci√≥n de datos con OpenSSL
  - Hashing de contrase√±as con `password_hash`
  - Validaci√≥n de tipos y estructuras

**Modelos espec√≠ficos:**

- Cada m√≥dulo funcional puede tener su propio modelo ubicado en `model/`.
- Estos modelos deben **extender de `mainModel`** para heredar los m√©todos base y mantener consistencia en la l√≥gica de acceso.

**Constantes globales:**

- Los archivos `config/APP` y `config/SERVER` definen constantes como:
  - Nombre del sistema
  - Ruta base
  - Claves de encriptaci√≥n
  - Credenciales de conexi√≥n
- Estas constantes se incluyen autom√°ticamente en el flujo de ejecuci√≥n, evitando la necesidad de cargarlas manualmente.

**Seguridad integrada:**

- Encriptaci√≥n de datos sensibles con OpenSSL
- Hashing seguro de contrase√±as con `password_hash`
- Validaci√≥n estricta de tipos y estructuras
- Uso obligatorio de `prepare` y `execute` en consultas SQL para prevenir inyecciones

> ‚ÄØ`üí°Centralizar la l√≥gica en mainModel y extender desde √©l permite mantener un backend limpio, seguro y f√°cilmente escalable.`

## 9. Reutilizaci√≥n y helpers

El proyecto incluye un conjunto de funciones reutilizables para facilitar el desarrollo. Estas funciones est√°n organizadas en dos directorios principales:

#### helpers/js:

Contiene funciones de JavaScript que se pueden reutilizar en el frontend para tareas comunes como la manipulaci√≥n del DOM, validaciones del lado del cliente, o peticiones as√≠ncronas.

#### helpers/php:

Incluye funciones auxiliares de PHP para diversas tareas, como la validaci√≥n de datos, el formateo de informaci√≥n, la generaci√≥n de tokens de seguridad y otras utilidades.

> `üí°Estas funciones se pueden cargar en tu c√≥digo mediante la instrucci√≥n require_once o, en algunos casos, pueden ser incluidas directamente desde scripts.php`.

## 10. Testing y depuraci√≥n

**Probar vistas**: Accede directamente a cada vista mediante la URL:

    https://localhost/proyecto/?page=nombre

`üí°Esto permite verificar que la vista se carga correctamente y que los componentes se integran como se espera.`

**Activar errores en desarrollo**: Agrega las siguientes l√≠neas en index.php o en el archivo de configuraci√≥n para mostrar errores durante el desarrollo:

```php
error_reporting(E_ALL);
ini_set("display_errors", 1);
```

#### Herramientas recomendadas para depuraci√≥n:

- Consola del navegador (inspecci√≥n de errores JS, red, DOM)

- Registros del servidor en el panel de XAMPP

- Funciones de inspecci√≥n en PHP: var_dump(), print_r()

## 11. Seguridad y buenas pr√°cticas

## **11. Seguridad y buenas pr√°cticas**

El sistema incorpora medidas de seguridad y convenciones t√©cnicas para proteger su integridad, evitar vulnerabilidades y facilitar el mantenimiento responsable por parte del equipo.

**Archivos protegidos (no modificar directamente):**

- `.htaccess` ‚Äì Controla la reescritura de URLs y el acceso al sistema  
- `composer.lock` ‚Äì Define versiones exactas de dependencias para garantizar compatibilidad  
- `vendor/` ‚Äì Contiene librer√≠as externas gestionadas por Composer  
- `config/SERVER/` ‚Äì Almacena credenciales, claves de encriptaci√≥n y par√°metros sensibles

Modificar estos archivos sin conocimiento t√©cnico puede comprometer la **estabilidad**, la **seguridad** o la **compatibilidad** del sistema.

**Buenas pr√°cticas recomendadas:**

- Mantener las credenciales y claves fuera del control de versiones (ej. usando `.gitignore`)  
- Validar todas las entradas del usuario antes de procesarlas  
- Utilizar consultas preparadas (`prepare` + `execute`) para prevenir inyecciones SQL  
- Hashear contrase√±as con `password_hash` antes de almacenarlas  
- Encriptar datos sensibles con OpenSSL utilizando claves definidas en `SERVER`

> üí°‚ÄØ`La seguridad del sistema depende tanto de su arquitectura como del uso responsable por parte de los desarrolladores. Documentar y respetar estas pr√°cticas es clave para un proyecto sostenible.`

---

### **Manejo de credenciales y datos sensibles**

Las credenciales de base de datos, claves de encriptaci√≥n y par√°metros de seguridad se definen en `config/SERVER`.

Estos datos deben mantenerse **fuera del control de versiones**, por ejemplo, usando `.gitignore` si el proyecto se publica o se comparte en plataformas como GitHub.

> üí°‚ÄØ`Nunca deben imprimirse en pantalla ni exponerse en el frontend.`

---

### **Recomendaciones de seguridad**

- Validar todas las entradas del usuario antes de procesarlas  
- Utilizar consultas preparadas (`prepare` + `execute`) para evitar inyecciones SQL  
- Hashear contrase√±as con `password_hash` antes de almacenarlas  
- Encriptar datos sensibles con OpenSSL usando claves definidas en `SERVER`

## 12. Colaboraci√≥n y control de versiones

#### Reglas de trabajo en equipo:

1.  Cada desarrollador debe trabajar en una rama propia, creada a partir de la versi√≥n m√°s reciente de la rama principal (master).

2.  Antes de iniciar cualquier desarrollo, se debe sincronizar con master para evitar conflictos.

3.  Las pull requests deben ser revisadas antes de fusionarse, asegurando que no se sobrescriba el trabajo de otros colaboradores.

4.  No se debe trabajar directamente sobre master sin revisi√≥n previa.

Comandos recomendados para flujo de trabajo con git:

```bash
# Actualizar la rama principal
git checkout master
git pull origin master

# Crear una nueva rama para trabajar
git checkout -b mi-rama

# Agregar y confirmar cambios
git add .
git commit -m "Descripci√≥n del cambio"

# Subir la rama al repositorio remoto
git push origin mi-rama

# Antes de hacer pull request, sincronizar con master
git checkout master
git pull origin master
git checkout mi-rama
git merge master

# Subir los cambios fusionados
git push origin
```

> `üí°Este flujo garantiza que cada contribuci√≥n est√© basada en la versi√≥n m√°s reciente del proyecto y que las integraciones se realicen de forma segura y ordenada.`

## 13. Documentaci√≥n adicional

#### Contenido de la carpeta docs/:

- **cosas_pendientes.txt** Lista de tareas por completar, mejoras sugeridas o funcionalidades en desarrollo.

- **estructura_proyecto.txt** Descripci√≥n jer√°rquica de la arquitectura del sistema, √∫til para onboarding y revisi√≥n t√©cnica.

- **manual_desarrollador.txt** Gu√≠a t√©cnica completa que documenta el funcionamiento del sistema, buenas pr√°cticas y convenciones de desarrollo.

#### Recomendaciones:

- Todo nuevo documento debe ser claro, descriptivo y ubicarse dentro de la carpeta docs/.

- El archivo README.md debe mantenerse actualizado con cada cambio relevante en el sistema, especialmente cuando se agregan funcionalidades, se modifica la estructura o se actualizan los requisitos t√©cnicos.

> `üí°Es responsabilidad de todos actuallizar la documentacion del proyecto con forme se hagan cambios`

## 14. Extensi√≥n y mantenimiento

#### Agregar nuevas vistas:

1. Crear el archivo en view/html con el nombre nombre-view.php.

2. Registrar el nombre de la vista en el arreglo paginas_existentes dentro de vista_model.php para que el sistema la reconozca.

#### Agregar nuevos modelos:

1. Ubicar el archivo en model/.

2. Extender de mainModel para heredar m√©todos comunes como conexi√≥n, encriptaci√≥n, validaci√≥n y hashing.

#### Agregar nuevos controladores:

1. Crear el archivo en controller/.

2. Integrarlo al flujo de ejecuci√≥n si se requiere l√≥gica adicional para una vista o m√≥dulo espec√≠fico.

#### Uso de Composer:

Para actualizar todas las dependencias:

```bash
composer update
```

Para instalar una nueva dependencia:

```bash
composer require nombre/paquete
```

#### Escalabilidad del sistema:

- Organizar m√≥dulos por dominio funcional (ejemplo: usuarios, reportes, productos).

- Integrar plugins externos mediante Composer o manualmente si son independientes.

- Definir rutas dedicadas en .htaccess para flujos espec√≠ficos o m√≥dulos aislados.

## 15. Conclusi√≥n

Este manual proporciona una gu√≠a completa para comprender, utilizar y extender el sistema de forma segura y colaborativa. La claridad, la modularidad y la responsabilidad compartida son pilares fundamentales del proyecto. Se recomienda mantener este documento actualizado y utilizarlo como referencia principal durante el desarrollo.
